import{_ as he}from"./router-701ec46f.js";import{p as Ot}from"./charts-e6656748.js";import{r as $t}from"./vendor-95a394d3.js";var st={},kt={L:1,M:0,Q:3,H:2},Ft={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},ce=Ft;function Ht(n){this.mode=ce.MODE_8BIT_BYTE,this.data=n}Ht.prototype={getLength:function(n){return this.data.length},write:function(n){for(var t=0;t<this.data.length;t++)n.put(this.data.charCodeAt(t),8)}};var de=Ht,tt=kt;function N(n,t){this.totalCount=n,this.dataCount=t}N.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];N.getRSBlocks=function(n,t){var e=N.getRsBlockTable(n,t);if(e==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+t);for(var r=e.length/3,i=new Array,o=0;o<r;o++)for(var a=e[o*3+0],s=e[o*3+1],l=e[o*3+2],h=0;h<a;h++)i.push(new N(s,l));return i};N.getRsBlockTable=function(n,t){switch(t){case tt.L:return N.RS_BLOCK_TABLE[(n-1)*4+0];case tt.M:return N.RS_BLOCK_TABLE[(n-1)*4+1];case tt.Q:return N.RS_BLOCK_TABLE[(n-1)*4+2];case tt.H:return N.RS_BLOCK_TABLE[(n-1)*4+3];default:return}};var fe=N;function Ut(){this.buffer=new Array,this.length=0}Ut.prototype={get:function(n){var t=Math.floor(n/8);return(this.buffer[t]>>>7-n%8&1)==1},put:function(n,t){for(var e=0;e<t;e++)this.putBit((n>>>t-e-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(n){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),n&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var ge=Ut,I={glog:function(n){if(n<1)throw new Error("glog("+n+")");return I.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return I.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var R=0;R<8;R++)I.EXP_TABLE[R]=1<<R;for(var R=8;R<256;R++)I.EXP_TABLE[R]=I.EXP_TABLE[R-4]^I.EXP_TABLE[R-5]^I.EXP_TABLE[R-6]^I.EXP_TABLE[R-8];for(var R=0;R<255;R++)I.LOG_TABLE[I.EXP_TABLE[R]]=R;var zt=I,K=zt;function it(n,t){if(n.length==null)throw new Error(n.length+"/"+t);for(var e=0;e<n.length&&n[e]==0;)e++;this.num=new Array(n.length-e+t);for(var r=0;r<n.length-e;r++)this.num[r]=n[r+e]}it.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var t=new Array(this.getLength()+n.getLength()-1),e=0;e<this.getLength();e++)for(var r=0;r<n.getLength();r++)t[e+r]^=K.gexp(K.glog(this.get(e))+K.glog(n.get(r)));return new it(t,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var t=K.glog(this.get(0))-K.glog(n.get(0)),e=new Array(this.getLength()),r=0;r<this.getLength();r++)e[r]=this.get(r);for(var r=0;r<n.getLength();r++)e[r]^=K.gexp(K.glog(n.get(r))+t);return new it(e,0).mod(n)}};var Vt=it,M=Ft,Dt=Vt,me=zt,U={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},P={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(n){for(var t=n<<10;P.getBCHDigit(t)-P.getBCHDigit(P.G15)>=0;)t^=P.G15<<P.getBCHDigit(t)-P.getBCHDigit(P.G15);return(n<<10|t)^P.G15_MASK},getBCHTypeNumber:function(n){for(var t=n<<12;P.getBCHDigit(t)-P.getBCHDigit(P.G18)>=0;)t^=P.G18<<P.getBCHDigit(t)-P.getBCHDigit(P.G18);return n<<12|t},getBCHDigit:function(n){for(var t=0;n!=0;)t++,n>>>=1;return t},getPatternPosition:function(n){return P.PATTERN_POSITION_TABLE[n-1]},getMask:function(n,t,e){switch(n){case U.PATTERN000:return(t+e)%2==0;case U.PATTERN001:return t%2==0;case U.PATTERN010:return e%3==0;case U.PATTERN011:return(t+e)%3==0;case U.PATTERN100:return(Math.floor(t/2)+Math.floor(e/3))%2==0;case U.PATTERN101:return t*e%2+t*e%3==0;case U.PATTERN110:return(t*e%2+t*e%3)%2==0;case U.PATTERN111:return(t*e%3+(t+e)%2)%2==0;default:throw new Error("bad maskPattern:"+n)}},getErrorCorrectPolynomial:function(n){for(var t=new Dt([1],0),e=0;e<n;e++)t=t.multiply(new Dt([1,me.gexp(e)],0));return t},getLengthInBits:function(n,t){if(1<=t&&t<10)switch(n){case M.MODE_NUMBER:return 10;case M.MODE_ALPHA_NUM:return 9;case M.MODE_8BIT_BYTE:return 8;case M.MODE_KANJI:return 8;default:throw new Error("mode:"+n)}else if(t<27)switch(n){case M.MODE_NUMBER:return 12;case M.MODE_ALPHA_NUM:return 11;case M.MODE_8BIT_BYTE:return 16;case M.MODE_KANJI:return 10;default:throw new Error("mode:"+n)}else if(t<41)switch(n){case M.MODE_NUMBER:return 14;case M.MODE_ALPHA_NUM:return 13;case M.MODE_8BIT_BYTE:return 16;case M.MODE_KANJI:return 12;default:throw new Error("mode:"+n)}else throw new Error("type:"+t)},getLostPoint:function(n){for(var t=n.getModuleCount(),e=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var o=0,a=n.isDark(r,i),s=-1;s<=1;s++)if(!(r+s<0||t<=r+s))for(var l=-1;l<=1;l++)i+l<0||t<=i+l||s==0&&l==0||a==n.isDark(r+s,i+l)&&o++;o>5&&(e+=3+o-5)}for(var r=0;r<t-1;r++)for(var i=0;i<t-1;i++){var h=0;n.isDark(r,i)&&h++,n.isDark(r+1,i)&&h++,n.isDark(r,i+1)&&h++,n.isDark(r+1,i+1)&&h++,(h==0||h==4)&&(e+=3)}for(var r=0;r<t;r++)for(var i=0;i<t-6;i++)n.isDark(r,i)&&!n.isDark(r,i+1)&&n.isDark(r,i+2)&&n.isDark(r,i+3)&&n.isDark(r,i+4)&&!n.isDark(r,i+5)&&n.isDark(r,i+6)&&(e+=40);for(var i=0;i<t;i++)for(var r=0;r<t-6;r++)n.isDark(r,i)&&!n.isDark(r+1,i)&&n.isDark(r+2,i)&&n.isDark(r+3,i)&&n.isDark(r+4,i)&&!n.isDark(r+5,i)&&n.isDark(r+6,i)&&(e+=40);for(var u=0,i=0;i<t;i++)for(var r=0;r<t;r++)n.isDark(r,i)&&u++;var w=Math.abs(100*u/t/t-50)/5;return e+=w*10,e}},ve=P,pe=de,Qt=fe,Kt=ge,V=ve,we=Vt;function O(n,t){this.typeNumber=n,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var A=O.prototype;A.addData=function(n){var t=new pe(n);this.dataList.push(t),this.dataCache=null};A.isDark=function(n,t){if(n<0||this.moduleCount<=n||t<0||this.moduleCount<=t)throw new Error(n+","+t);return this.modules[n][t]};A.getModuleCount=function(){return this.moduleCount};A.make=function(){if(this.typeNumber<1){var n=1;for(n=1;n<40;n++){for(var t=Qt.getRSBlocks(n,this.errorCorrectLevel),e=new Kt,r=0,i=0;i<t.length;i++)r+=t[i].dataCount;for(var i=0;i<this.dataList.length;i++){var o=this.dataList[i];e.put(o.mode,4),e.put(o.getLength(),V.getLengthInBits(o.mode,n)),o.write(e)}if(e.getLengthInBits()<=r*8)break}this.typeNumber=n}this.makeImpl(!1,this.getBestMaskPattern())};A.makeImpl=function(n,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++){this.modules[e]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[e][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(n,t),this.typeNumber>=7&&this.setupTypeNumber(n),this.dataCache==null&&(this.dataCache=O.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};A.setupPositionProbePattern=function(n,t){for(var e=-1;e<=7;e++)if(!(n+e<=-1||this.moduleCount<=n+e))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(0<=e&&e<=6&&(r==0||r==6)||0<=r&&r<=6&&(e==0||e==6)||2<=e&&e<=4&&2<=r&&r<=4?this.modules[n+e][t+r]=!0:this.modules[n+e][t+r]=!1)};A.getBestMaskPattern=function(){for(var n=0,t=0,e=0;e<8;e++){this.makeImpl(!0,e);var r=V.getLostPoint(this);(e==0||n>r)&&(n=r,t=e)}return t};A.createMovieClip=function(n,t,e){var r=n.createEmptyMovieClip(t,e),i=1;this.make();for(var o=0;o<this.modules.length;o++)for(var a=o*i,s=0;s<this.modules[o].length;s++){var l=s*i,h=this.modules[o][s];h&&(r.beginFill(0,100),r.moveTo(l,a),r.lineTo(l+i,a),r.lineTo(l+i,a+i),r.lineTo(l,a+i),r.endFill())}return r};A.setupTimingPattern=function(){for(var n=8;n<this.moduleCount-8;n++)this.modules[n][6]==null&&(this.modules[n][6]=n%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};A.setupPositionAdjustPattern=function(){for(var n=V.getPatternPosition(this.typeNumber),t=0;t<n.length;t++)for(var e=0;e<n.length;e++){var r=n[t],i=n[e];if(this.modules[r][i]==null)for(var o=-2;o<=2;o++)for(var a=-2;a<=2;a++)o==-2||o==2||a==-2||a==2||o==0&&a==0?this.modules[r+o][i+a]=!0:this.modules[r+o][i+a]=!1}};A.setupTypeNumber=function(n){for(var t=V.getBCHTypeNumber(this.typeNumber),e=0;e<18;e++){var r=!n&&(t>>e&1)==1;this.modules[Math.floor(e/3)][e%3+this.moduleCount-8-3]=r}for(var e=0;e<18;e++){var r=!n&&(t>>e&1)==1;this.modules[e%3+this.moduleCount-8-3][Math.floor(e/3)]=r}};A.setupTypeInfo=function(n,t){for(var e=this.errorCorrectLevel<<3|t,r=V.getBCHTypeInfo(e),i=0;i<15;i++){var o=!n&&(r>>i&1)==1;i<6?this.modules[i][8]=o:i<8?this.modules[i+1][8]=o:this.modules[this.moduleCount-15+i][8]=o}for(var i=0;i<15;i++){var o=!n&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=o:i<9?this.modules[8][15-i-1+1]=o:this.modules[8][15-i-1]=o}this.modules[this.moduleCount-8][8]=!n};A.mapData=function(n,t){for(var e=-1,r=this.moduleCount-1,i=7,o=0,a=this.moduleCount-1;a>0;a-=2)for(a==6&&a--;;){for(var s=0;s<2;s++)if(this.modules[r][a-s]==null){var l=!1;o<n.length&&(l=(n[o]>>>i&1)==1);var h=V.getMask(t,r,a-s);h&&(l=!l),this.modules[r][a-s]=l,i--,i==-1&&(o++,i=7)}if(r+=e,r<0||this.moduleCount<=r){r-=e,e=-e;break}}};O.PAD0=236;O.PAD1=17;O.createData=function(n,t,e){for(var r=Qt.getRSBlocks(n,t),i=new Kt,o=0;o<e.length;o++){var a=e[o];i.put(a.mode,4),i.put(a.getLength(),V.getLengthInBits(a.mode,n)),a.write(i)}for(var s=0,o=0;o<r.length;o++)s+=r[o].dataCount;if(i.getLengthInBits()>s*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+s*8+")");for(i.getLengthInBits()+4<=s*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=s*8||(i.put(O.PAD0,8),i.getLengthInBits()>=s*8));)i.put(O.PAD1,8);return O.createBytes(i,r)};O.createBytes=function(n,t){for(var e=0,r=0,i=0,o=new Array(t.length),a=new Array(t.length),s=0;s<t.length;s++){var l=t[s].dataCount,h=t[s].totalCount-l;r=Math.max(r,l),i=Math.max(i,h),o[s]=new Array(l);for(var u=0;u<o[s].length;u++)o[s][u]=255&n.buffer[u+e];e+=l;var w=V.getErrorCorrectPolynomial(h),c=new we(o[s],w.getLength()-1),d=c.mod(w);a[s]=new Array(w.getLength()-1);for(var u=0;u<a[s].length;u++){var m=u+d.getLength()-a[s].length;a[s][u]=m>=0?d.get(m):0}}for(var p=0,u=0;u<t.length;u++)p+=t[u].totalCount;for(var _=new Array(p),f=0,u=0;u<r;u++)for(var s=0;s<t.length;s++)u<o[s].length&&(_[f++]=o[s][u]);for(var u=0;u<i;u++)for(var s=0;s<t.length;s++)u<a[s].length&&(_[f++]=a[s][u]);return _};var ye=O,Bt={};Object.defineProperty(Bt,"__esModule",{value:!0});var Ee=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},_e=Ot,L=xt(_e),Wt=$t,et=xt(Wt);function xt(n){return n&&n.__esModule?n:{default:n}}function Ce(n,t){var e={};for(var r in n)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}var Te={bgColor:L.default.oneOfType([L.default.object,L.default.string]).isRequired,bgD:L.default.string.isRequired,fgColor:L.default.oneOfType([L.default.object,L.default.string]).isRequired,fgD:L.default.string.isRequired,size:L.default.number.isRequired,title:L.default.string,viewBoxSize:L.default.number.isRequired,xmlns:L.default.string},Pt=(0,Wt.forwardRef)(function(n,t){var e=n.bgColor,r=n.bgD,i=n.fgD,o=n.fgColor,a=n.size,s=n.title,l=n.viewBoxSize,h=n.xmlns,u=h===void 0?"http://www.w3.org/2000/svg":h,w=Ce(n,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return et.default.createElement("svg",Ee({},w,{height:a,ref:t,viewBox:"0 0 "+l+" "+l,width:a,xmlns:u}),s?et.default.createElement("title",null,s):null,et.default.createElement("path",{d:r,fill:e}),et.default.createElement("path",{d:i,fill:o}))});Pt.displayName="QRCodeSvg";Pt.propTypes=Te;Bt.default=Pt;Object.defineProperty(st,"__esModule",{value:!0});st.QRCode=void 0;var Be=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},Pe=Ot,F=X(Pe),Re=kt,Ae=X(Re),Se=ye,Me=X(Se),jt=$t,Le=X(jt),De=Bt,Ie=X(De);function X(n){return n&&n.__esModule?n:{default:n}}function be(n,t){var e={};for(var r in n)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}var Ne={bgColor:F.default.oneOfType([F.default.object,F.default.string]),fgColor:F.default.oneOfType([F.default.object,F.default.string]),level:F.default.string,size:F.default.number,value:F.default.string.isRequired},lt=(0,jt.forwardRef)(function(n,t){var e=n.bgColor,r=e===void 0?"#FFFFFF":e,i=n.fgColor,o=i===void 0?"#000000":i,a=n.level,s=a===void 0?"L":a,l=n.size,h=l===void 0?256:l,u=n.value,w=be(n,["bgColor","fgColor","level","size","value"]),c=new Me.default(-1,Ae.default[s]);c.addData(u),c.make();var d=c.modules;return Le.default.createElement(Ie.default,Be({},w,{bgColor:r,bgD:d.map(function(m,p){return m.map(function(_,f){return _?"":"M "+f+" "+p+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:d.map(function(m,p){return m.map(function(_,f){return _?"M "+f+" "+p+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:h,viewBoxSize:d.length}))});st.QRCode=lt;lt.displayName="QRCode";lt.propTypes=Ne;var Rn=st.default=lt;class E{constructor(t,e,r,i,o){this._legacyCanvasSize=E.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),r&&typeof r=="object"?this._onDecode=e:(console.warn(r||i||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=e),e=typeof r=="object"?r:{},this._onDecodeError=e.onDecodeError||(typeof r=="function"?r:this._onDecodeError),this._calculateScanRegion=e.calculateScanRegion||(typeof i=="function"?i:this._calculateScanRegion),this._preferredCamera=e.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof r=="number"?r:typeof i=="number"?i:this._legacyCanvasSize,this._maxScansPerSecond=e.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let a=!1;if(t.hidden&&(t.hidden=!1,a=!0),document.body.contains(t)||(document.body.appendChild(t),a=!0),r=t.parentElement,e.highlightScanRegion||e.highlightCodeOutline){if(i=!!e.overlay,this.$overlay=e.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&e.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}r.insertBefore(this.$overlay,this.$video.nextSibling)}e.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let s=window.getComputedStyle(t);s.display==="none"&&(t.style.setProperty("display","block","important"),a=!0),s.visibility!=="visible"&&(t.style.setProperty("visibility","visible","important"),a=!0),a&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=E.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await E.listCameras(!1)).length}catch{return!1}}static async listCameras(t=!1){if(!navigator.mediaDevices)return[];let e=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput"),r;try{t&&(await e()).every(i=>!i.label)&&(r=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await e()).map((i,o)=>({id:i.deviceId,label:i.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{r&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),E._stopVideoStream(r))}}async hasFlash(){let t;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;t=this.$video.srcObject}else t=(await this._getCameraStream()).stream;return"torch"in t.getVideoTracks()[0].getSettings()}catch{return!1}finally{t&&t!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),E._stopVideoStream(t))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(t){throw this._flashOn=!1,t}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),E._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:t,facingMode:e}=await this._getCameraStream();!this._active||this._paused?E._stopVideoStream(t):(this._setVideoMirror(e),this.$video.srcObject=t,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(t){if(!this._paused)throw this._active=!1,t}}stop(){this.pause(),this._active=!1}async pause(t=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let e=()=>{this.$video.srcObject instanceof MediaStream&&(E._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return t?(e(),!0):(await new Promise(r=>setTimeout(r,300)),this._paused?(e(),!0):!1)}async setCamera(t){t!==this._preferredCamera&&(this._preferredCamera=t,await this._restartVideoStream())}static async scanImage(t,e,r,i,o=!1,a=!1){let s,l=!1;e&&("scanRegion"in e||"qrEngine"in e||"canvas"in e||"disallowCanvasResizing"in e||"alsoTryWithoutScanRegion"in e||"returnDetailedScanResult"in e)?(s=e.scanRegion,r=e.qrEngine,i=e.canvas,o=e.disallowCanvasResizing||!1,a=e.alsoTryWithoutScanRegion||!1,l=!0):console.warn(e||r||i||o||a?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),e=!!r;try{let h,u;[r,h]=await Promise.all([r||E.createQrEngine(),E._loadImage(t)]),[i,u]=E._drawToCanvas(h,s,i,o);let w;if(r instanceof Worker){let c=r;e||E._postWorkerMessageSync(c,"inversionMode","both"),w=await new Promise((d,m)=>{let p,_,f,y=-1;_=g=>{g.data.id===y&&(c.removeEventListener("message",_),c.removeEventListener("error",f),clearTimeout(p),g.data.data!==null?d({data:g.data.data,cornerPoints:E._convertPoints(g.data.cornerPoints,s)}):m(E.NO_QR_CODE_FOUND))},f=g=>{c.removeEventListener("message",_),c.removeEventListener("error",f),clearTimeout(p),m("Scanner error: "+(g?g.message||g:"Unknown Error"))},c.addEventListener("message",_),c.addEventListener("error",f),p=setTimeout(()=>f("timeout"),1e4);let v=u.getImageData(0,0,i.width,i.height);y=E._postWorkerMessageSync(c,"decode",v,[v.data.buffer])})}else w=await Promise.race([new Promise((c,d)=>window.setTimeout(()=>d("Scanner error: timeout"),1e4)),(async()=>{try{var[c]=await r.detect(i);if(!c)throw E.NO_QR_CODE_FOUND;return{data:c.rawValue,cornerPoints:E._convertPoints(c.cornerPoints,s)}}catch(d){if(c=d.message||d,/not implemented|service unavailable/.test(c))return E._disableBarcodeDetector=!0,E.scanImage(t,{scanRegion:s,canvas:i,disallowCanvasResizing:o,alsoTryWithoutScanRegion:a});throw`Scanner error: ${c}`}})()]);return l?w:w.data}catch(h){if(!s||!a)throw h;let u=await E.scanImage(t,{qrEngine:r,canvas:i,disallowCanvasResizing:o});return l?u:u.data}finally{e||E._postWorkerMessage(r,"close")}}setGrayscaleWeights(t,e,r,i=!0){E._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:e,blue:r,useIntegerApproximation:i})}setInversionMode(t){E._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static async createQrEngine(t){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>he(()=>import("./qr-scanner-worker.min-5f44a019.js"),[]).then(r=>r.createWorker()),!(!E._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return t();let e=navigator.userAgentData;return e&&e.brands.some(({brand:r})=>/Chromium/i.test(r))&&/mac ?OS/i.test(e.platform)&&await e.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:r,platformVersion:i})=>/arm/i.test(r||"arm")&&13<=parseInt(i||"13")).catch(()=>!0)?t():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let e=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-e)/2),y:Math.round((t.videoHeight-e)/2),width:e,height:e,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,e=t.videoWidth,r=t.videoHeight,i=t.offsetWidth,o=t.offsetHeight,a=t.offsetLeft,s=t.offsetTop,l=window.getComputedStyle(t),h=l.objectFit,u=e/r,w=i/o;switch(h){case"none":var c=e,d=r;break;case"fill":c=i,d=o;break;default:(h==="cover"?u>w:u<w)?(d=o,c=d*u):(c=i,d=c/u),h==="scale-down"&&(c=Math.min(c,e),d=Math.min(d,r))}var[m,p]=l.objectPosition.split(" ").map((f,y)=>{const v=parseFloat(f);return f.endsWith("%")?(y?o-d:i-c)*v/100:v});l=this._scanRegion.width||e,w=this._scanRegion.height||r,h=this._scanRegion.x||0;var _=this._scanRegion.y||0;u=this.$overlay.style,u.width=`${l/e*c}px`,u.height=`${w/r*d}px`,u.top=`${s+p+_/r*d}px`,r=/scaleX\(-1\)/.test(t.style.transform),u.left=`${a+(r?i-m-c:m)+(r?e-h-l:h)/e*c}px`,u.transform=t.style.transform}})}static _convertPoints(t,e){if(!e)return t;let r=e.x||0,i=e.y||0,o=e.width&&e.downScaledWidth?e.width/e.downScaledWidth:1;e=e.height&&e.downScaledHeight?e.height/e.downScaledHeight:1;for(let a of t)a.x=a.x*o+r,a.y=a.y*e+i;return t}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var t=Date.now()-this._lastScanTimestamp,e=1e3/this._maxScansPerSecond;t<e&&await new Promise(i=>setTimeout(i,e-t)),this._lastScanTimestamp=Date.now();try{var r=await E.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!E._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=E.createQrEngine()),r?(this._onDecode?this._onDecode(r):this._legacyOnDecode&&this._legacyOnDecode(r.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",r.cornerPoints.map(({x:i,y:o})=>`${i},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(t){t!==E.NO_QR_CODE_FOUND&&console.log(t)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let t=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",e=[{width:{min:1024}},{width:{min:768}},{}],r=e.map(i=>Object.assign({},i,{[t]:{exact:this._preferredCamera}}));for(let i of[...r,...e])try{let o=await navigator.mediaDevices.getUserMedia({video:i,audio:!1}),a=this._getFacingMode(o)||(i.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:a}}catch{}throw"Camera not found."}async _restartVideoStream(){let t=this._paused;await this.pause(!0)&&!t&&this._active&&await this.start()}static _stopVideoStream(t){for(let e of t.getTracks())e.stop(),t.removeTrack(e)}_setVideoMirror(t){this.$video.style.transform="scaleX("+(t==="user"?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,e,r,i=!1){r=r||document.createElement("canvas");let o=e&&e.x?e.x:0,a=e&&e.y?e.y:0,s=e&&e.width?e.width:t.videoWidth||t.width,l=e&&e.height?e.height:t.videoHeight||t.height;return i||(i=e&&e.downScaledWidth?e.downScaledWidth:s,e=e&&e.downScaledHeight?e.downScaledHeight:l,r.width!==i&&(r.width=i),r.height!==e&&(r.height=e)),e=r.getContext("2d",{alpha:!1}),e.imageSmoothingEnabled=!1,e.drawImage(t,o,a,s,l,0,0,r.width,r.height),[r,e]}static async _loadImage(t){if(t instanceof Image)return await E._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(t instanceof File||t instanceof Blob||t instanceof URL||typeof t=="string"){let e=new Image;e.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return await E._awaitImageLoad(e),e}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(e.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(t){t.complete&&t.naturalWidth!==0||await new Promise((e,r)=>{let i=o=>{t.removeEventListener("load",i),t.removeEventListener("error",i),o instanceof ErrorEvent?r("Image load error"):e()};t.addEventListener("load",i),t.addEventListener("error",i)})}static async _postWorkerMessage(t,e,r,i){return E._postWorkerMessageSync(await t,e,r,i)}static _postWorkerMessageSync(t,e,r,i){if(!(t instanceof Worker))return-1;let o=E._workerMessageId++;return t.postMessage({id:o,type:e,data:r},i),o}}E.DEFAULT_CANVAS_SIZE=400;E.NO_QR_CODE_FOUND="No QR code found";E._disableBarcodeDetector=!1;E._workerMessageId=0;var ut={},Oe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Jt={},S={};let Rt;const $e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];S.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};S.getSymbolTotalCodewords=function(t){return $e[t]};S.getBCHDigit=function(n){let t=0;for(;n!==0;)t++,n>>>=1;return t};S.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Rt=t};S.isKanjiModeEnabled=function(){return typeof Rt<"u"};S.toSJIS=function(t){return Rt(t)};var ht={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+e)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return t(r)}catch{return i}}})(ht);function Gt(){this.buffer=[],this.length=0}Gt.prototype={get:function(n){const t=Math.floor(n/8);return(this.buffer[t]>>>7-n%8&1)===1},put:function(n,t){for(let e=0;e<t;e++)this.putBit((n>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),n&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var ke=Gt;function Z(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}Z.prototype.set=function(n,t,e,r){const i=n*this.size+t;this.data[i]=e,r&&(this.reservedBit[i]=!0)};Z.prototype.get=function(n,t){return this.data[n*this.size+t]};Z.prototype.xor=function(n,t,e){this.data[n*this.size+t]^=e};Z.prototype.isReserved=function(n,t){return this.reservedBit[n*this.size+t]};var Fe=Z,Yt={};(function(n){const t=S.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,o=t(r),a=o===145?26:Math.ceil((o-13)/(2*i-2))*2,s=[o-7];for(let l=1;l<i-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},n.getPositions=function(r){const i=[],o=n.getRowColCoords(r),a=o.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||i.push([o[s],o[l]]);return i}})(Yt);var qt={};const He=S.getSymbolSize,It=7;qt.getPositions=function(t){const e=He(t);return[[0,0],[e-It,0],[0,e-It]]};var Xt={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const o=i.size;let a=0,s=0,l=0,h=null,u=null;for(let w=0;w<o;w++){s=l=0,h=u=null;for(let c=0;c<o;c++){let d=i.get(w,c);d===h?s++:(s>=5&&(a+=t.N1+(s-5)),h=d,s=1),d=i.get(c,w),d===u?l++:(l>=5&&(a+=t.N1+(l-5)),u=d,l=1)}s>=5&&(a+=t.N1+(s-5)),l>=5&&(a+=t.N1+(l-5))}return a},n.getPenaltyN2=function(i){const o=i.size;let a=0;for(let s=0;s<o-1;s++)for(let l=0;l<o-1;l++){const h=i.get(s,l)+i.get(s,l+1)+i.get(s+1,l)+i.get(s+1,l+1);(h===4||h===0)&&a++}return a*t.N2},n.getPenaltyN3=function(i){const o=i.size;let a=0,s=0,l=0;for(let h=0;h<o;h++){s=l=0;for(let u=0;u<o;u++)s=s<<1&2047|i.get(h,u),u>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|i.get(u,h),u>=10&&(l===1488||l===93)&&a++}return a*t.N3},n.getPenaltyN4=function(i){let o=0;const a=i.data.length;for(let l=0;l<a;l++)o+=i.data[l];return Math.abs(Math.ceil(o*100/a/5)-10)*t.N4};function e(r,i,o){switch(r){case n.Patterns.PATTERN000:return(i+o)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return o%3===0;case n.Patterns.PATTERN011:return(i+o)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case n.Patterns.PATTERN101:return i*o%2+i*o%3===0;case n.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case n.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,o){const a=o.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)o.isReserved(l,s)||o.xor(l,s,e(i,l,s))},n.getBestMask=function(i,o){const a=Object.keys(n.Patterns).length;let s=0,l=1/0;for(let h=0;h<a;h++){o(h),n.applyMask(h,i);const u=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(h,i),u<l&&(l=u,s=h)}return s}})(Xt);var ct={};const z=ht,nt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],rt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ct.getBlocksCount=function(t,e){switch(e){case z.L:return nt[(t-1)*4+0];case z.M:return nt[(t-1)*4+1];case z.Q:return nt[(t-1)*4+2];case z.H:return nt[(t-1)*4+3];default:return}};ct.getTotalCodewordsCount=function(t,e){switch(e){case z.L:return rt[(t-1)*4+0];case z.M:return rt[(t-1)*4+1];case z.Q:return rt[(t-1)*4+2];case z.H:return rt[(t-1)*4+3];default:return}};var Zt={},dt={};const Y=new Uint8Array(512),ot=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)Y[e]=t,ot[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)Y[e]=Y[e-255]})();dt.log=function(t){if(t<1)throw new Error("log("+t+")");return ot[t]};dt.exp=function(t){return Y[t]};dt.mul=function(t,e){return t===0||e===0?0:Y[ot[t]+ot[e]]};(function(n){const t=dt;n.mul=function(r,i){const o=new Uint8Array(r.length+i.length-1);for(let a=0;a<r.length;a++)for(let s=0;s<i.length;s++)o[a+s]^=t.mul(r[a],i[s]);return o},n.mod=function(r,i){let o=new Uint8Array(r);for(;o.length-i.length>=0;){const a=o[0];for(let l=0;l<i.length;l++)o[l]^=t.mul(i[l],a);let s=0;for(;s<o.length&&o[s]===0;)s++;o=o.slice(s)}return o},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let o=0;o<r;o++)i=n.mul(i,new Uint8Array([1,t.exp(o)]));return i}})(Zt);const te=Zt;function At(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}At.prototype.initialize=function(t){this.degree=t,this.genPoly=te.generateECPolynomial(this.degree)};At.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const r=te.mod(e,this.genPoly),i=this.degree-r.length;if(i>0){const o=new Uint8Array(this.degree);return o.set(r,i),o}return r};var Ue=At,ee={},Q={},St={};St.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var $={};const ne="[0-9]+",ze="[A-Z $%*+\\-./:]+";let q="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";q=q.replace(/u/g,"\\u");const Ve="(?:(?![A-Z0-9 $%*+\\-./:]|"+q+`)(?:.|[\r
]))+`;$.KANJI=new RegExp(q,"g");$.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");$.BYTE=new RegExp(Ve,"g");$.NUMERIC=new RegExp(ne,"g");$.ALPHANUMERIC=new RegExp(ze,"g");const Qe=new RegExp("^"+q+"$"),Ke=new RegExp("^"+ne+"$"),We=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$.testKanji=function(t){return Qe.test(t)};$.testNumeric=function(t){return Ke.test(t)};$.testAlphanumeric=function(t){return We.test(t)};(function(n){const t=St,e=$;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(o,a){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?o.ccBits[0]:a<27?o.ccBits[1]:o.ccBits[2]},n.getBestModeForData=function(o){return e.testNumeric(o)?n.NUMERIC:e.testAlphanumeric(o)?n.ALPHANUMERIC:e.testKanji(o)?n.KANJI:n.BYTE},n.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},n.isValid=function(o){return o&&o.bit&&o.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(o,a){if(n.isValid(o))return o;try{return r(o)}catch{return a}}})(Q);(function(n){const t=S,e=ct,r=ht,i=Q,o=St,a=7973,s=t.getBCHDigit(a);function l(c,d,m){for(let p=1;p<=40;p++)if(d<=n.getCapacity(p,m,c))return p}function h(c,d){return i.getCharCountIndicator(c,d)+4}function u(c,d){let m=0;return c.forEach(function(p){const _=h(p.mode,d);m+=_+p.getBitsLength()}),m}function w(c,d){for(let m=1;m<=40;m++)if(u(c,m)<=n.getCapacity(m,d,i.MIXED))return m}n.from=function(d,m){return o.isValid(d)?parseInt(d,10):m},n.getCapacity=function(d,m,p){if(!o.isValid(d))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=i.BYTE);const _=t.getSymbolTotalCodewords(d),f=e.getTotalCodewordsCount(d,m),y=(_-f)*8;if(p===i.MIXED)return y;const v=y-h(p,d);switch(p){case i.NUMERIC:return Math.floor(v/10*3);case i.ALPHANUMERIC:return Math.floor(v/11*2);case i.KANJI:return Math.floor(v/13);case i.BYTE:default:return Math.floor(v/8)}},n.getBestVersionForData=function(d,m){let p;const _=r.from(m,r.M);if(Array.isArray(d)){if(d.length>1)return w(d,_);if(d.length===0)return 1;p=d[0]}else p=d;return l(p.mode,p.getLength(),_)},n.getEncodedBits=function(d){if(!o.isValid(d)||d<7)throw new Error("Invalid QR Code version");let m=d<<12;for(;t.getBCHDigit(m)-s>=0;)m^=a<<t.getBCHDigit(m)-s;return d<<12|m}})(ee);var re={};const Et=S,ie=1335,xe=21522,bt=Et.getBCHDigit(ie);re.getEncodedBits=function(t,e){const r=t.bit<<3|e;let i=r<<10;for(;Et.getBCHDigit(i)-bt>=0;)i^=ie<<Et.getBCHDigit(i)-bt;return(r<<10|i)^xe};var oe={};const je=Q;function W(n){this.mode=je.NUMERIC,this.data=n.toString()}W.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};W.prototype.getLength=function(){return this.data.length};W.prototype.getBitsLength=function(){return W.getBitsLength(this.data.length)};W.prototype.write=function(t){let e,r,i;for(e=0;e+3<=this.data.length;e+=3)r=this.data.substr(e,3),i=parseInt(r,10),t.put(i,10);const o=this.data.length-e;o>0&&(r=this.data.substr(e),i=parseInt(r,10),t.put(i,o*3+1))};var Je=W;const Ge=Q,mt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function x(n){this.mode=Ge.ALPHANUMERIC,this.data=n}x.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};x.prototype.getLength=function(){return this.data.length};x.prototype.getBitsLength=function(){return x.getBitsLength(this.data.length)};x.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let r=mt.indexOf(this.data[e])*45;r+=mt.indexOf(this.data[e+1]),t.put(r,11)}this.data.length%2&&t.put(mt.indexOf(this.data[e]),6)};var Ye=x;const qe=Q;function j(n){this.mode=qe.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}j.getBitsLength=function(t){return t*8};j.prototype.getLength=function(){return this.data.length};j.prototype.getBitsLength=function(){return j.getBitsLength(this.data.length)};j.prototype.write=function(n){for(let t=0,e=this.data.length;t<e;t++)n.put(this.data[t],8)};var Xe=j;const Ze=Q,tn=S;function J(n){this.mode=Ze.KANJI,this.data=n}J.getBitsLength=function(t){return t*13};J.prototype.getLength=function(){return this.data.length};J.prototype.getBitsLength=function(){return J.getBitsLength(this.data.length)};J.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let e=tn.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),n.put(e,13)}};var en=J,ae={exports:{}};(function(n){var t={single_source_shortest_paths:function(e,r,i){var o={},a={};a[r]=0;var s=t.PriorityQueue.make();s.push(r,0);for(var l,h,u,w,c,d,m,p,_;!s.empty();){l=s.pop(),h=l.value,w=l.cost,c=e[h]||{};for(u in c)c.hasOwnProperty(u)&&(d=c[u],m=w+d,p=a[u],_=typeof a[u]>"u",(_||p>m)&&(a[u]=m,s.push(u,m),o[u]=h))}if(typeof i<"u"&&typeof a[i]>"u"){var f=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(f)}return o},extract_shortest_path_from_predecessor_list:function(e,r){for(var i=[],o=r;o;)i.push(o),e[o],o=e[o];return i.reverse(),i},find_path:function(e,r,i){var o=t.single_source_shortest_paths(e,r,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(e){var r=t.PriorityQueue,i={},o;e=e||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=e.sorter||r.default_sorter,i},default_sorter:function(e,r){return e.cost-r.cost},push:function(e,r){var i={value:e,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=t})(ae);var nn=ae.exports;(function(n){const t=Q,e=Je,r=Ye,i=Xe,o=en,a=$,s=S,l=nn;function h(f){return unescape(encodeURIComponent(f)).length}function u(f,y,v){const g=[];let C;for(;(C=f.exec(v))!==null;)g.push({data:C[0],index:C.index,mode:y,length:C[0].length});return g}function w(f){const y=u(a.NUMERIC,t.NUMERIC,f),v=u(a.ALPHANUMERIC,t.ALPHANUMERIC,f);let g,C;return s.isKanjiModeEnabled()?(g=u(a.BYTE,t.BYTE,f),C=u(a.KANJI,t.KANJI,f)):(g=u(a.BYTE_KANJI,t.BYTE,f),C=[]),y.concat(v,g,C).sort(function(B,D){return B.index-D.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function c(f,y){switch(y){case t.NUMERIC:return e.getBitsLength(f);case t.ALPHANUMERIC:return r.getBitsLength(f);case t.KANJI:return o.getBitsLength(f);case t.BYTE:return i.getBitsLength(f)}}function d(f){return f.reduce(function(y,v){const g=y.length-1>=0?y[y.length-1]:null;return g&&g.mode===v.mode?(y[y.length-1].data+=v.data,y):(y.push(v),y)},[])}function m(f){const y=[];for(let v=0;v<f.length;v++){const g=f[v];switch(g.mode){case t.NUMERIC:y.push([g,{data:g.data,mode:t.ALPHANUMERIC,length:g.length},{data:g.data,mode:t.BYTE,length:g.length}]);break;case t.ALPHANUMERIC:y.push([g,{data:g.data,mode:t.BYTE,length:g.length}]);break;case t.KANJI:y.push([g,{data:g.data,mode:t.BYTE,length:h(g.data)}]);break;case t.BYTE:y.push([{data:g.data,mode:t.BYTE,length:h(g.data)}])}}return y}function p(f,y){const v={},g={start:{}};let C=["start"];for(let T=0;T<f.length;T++){const B=f[T],D=[];for(let H=0;H<B.length;H++){const b=B[H],G=""+T+H;D.push(G),v[G]={node:b,lastCount:0},g[G]={};for(let gt=0;gt<C.length;gt++){const k=C[gt];v[k]&&v[k].node.mode===b.mode?(g[k][G]=c(v[k].lastCount+b.length,b.mode)-c(v[k].lastCount,b.mode),v[k].lastCount+=b.length):(v[k]&&(v[k].lastCount=b.length),g[k][G]=c(b.length,b.mode)+4+t.getCharCountIndicator(b.mode,y))}}C=D}for(let T=0;T<C.length;T++)g[C[T]].end=0;return{map:g,table:v}}function _(f,y){let v;const g=t.getBestModeForData(f);if(v=t.from(y,g),v!==t.BYTE&&v.bit<g.bit)throw new Error('"'+f+'" cannot be encoded with mode '+t.toString(v)+`.
 Suggested mode is: `+t.toString(g));switch(v===t.KANJI&&!s.isKanjiModeEnabled()&&(v=t.BYTE),v){case t.NUMERIC:return new e(f);case t.ALPHANUMERIC:return new r(f);case t.KANJI:return new o(f);case t.BYTE:return new i(f)}}n.fromArray=function(y){return y.reduce(function(v,g){return typeof g=="string"?v.push(_(g,null)):g.data&&v.push(_(g.data,g.mode)),v},[])},n.fromString=function(y,v){const g=w(y,s.isKanjiModeEnabled()),C=m(g),T=p(C,v),B=l.find_path(T.map,"start","end"),D=[];for(let H=1;H<B.length-1;H++)D.push(T.table[B[H]].node);return n.fromArray(d(D))},n.rawSplit=function(y){return n.fromArray(w(y,s.isKanjiModeEnabled()))}})(oe);const ft=S,vt=ht,rn=ke,on=Fe,an=Yt,sn=qt,_t=Xt,Ct=ct,ln=Ue,at=ee,un=re,hn=Q,pt=oe;function cn(n,t){const e=n.size,r=sn.getPositions(t);for(let i=0;i<r.length;i++){const o=r[i][0],a=r[i][1];for(let s=-1;s<=7;s++)if(!(o+s<=-1||e<=o+s))for(let l=-1;l<=7;l++)a+l<=-1||e<=a+l||(s>=0&&s<=6&&(l===0||l===6)||l>=0&&l<=6&&(s===0||s===6)||s>=2&&s<=4&&l>=2&&l<=4?n.set(o+s,a+l,!0,!0):n.set(o+s,a+l,!1,!0))}}function dn(n){const t=n.size;for(let e=8;e<t-8;e++){const r=e%2===0;n.set(e,6,r,!0),n.set(6,e,r,!0)}}function fn(n,t){const e=an.getPositions(t);for(let r=0;r<e.length;r++){const i=e[r][0],o=e[r][1];for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)a===-2||a===2||s===-2||s===2||a===0&&s===0?n.set(i+a,o+s,!0,!0):n.set(i+a,o+s,!1,!0)}}function gn(n,t){const e=n.size,r=at.getEncodedBits(t);let i,o,a;for(let s=0;s<18;s++)i=Math.floor(s/3),o=s%3+e-8-3,a=(r>>s&1)===1,n.set(i,o,a,!0),n.set(o,i,a,!0)}function wt(n,t,e){const r=n.size,i=un.getEncodedBits(t,e);let o,a;for(o=0;o<15;o++)a=(i>>o&1)===1,o<6?n.set(o,8,a,!0):o<8?n.set(o+1,8,a,!0):n.set(r-15+o,8,a,!0),o<8?n.set(8,r-o-1,a,!0):o<9?n.set(8,15-o-1+1,a,!0):n.set(8,15-o-1,a,!0);n.set(r-8,8,1,!0)}function mn(n,t){const e=n.size;let r=-1,i=e-1,o=7,a=0;for(let s=e-1;s>0;s-=2)for(s===6&&s--;;){for(let l=0;l<2;l++)if(!n.isReserved(i,s-l)){let h=!1;a<t.length&&(h=(t[a]>>>o&1)===1),n.set(i,s-l,h),o--,o===-1&&(a++,o=7)}if(i+=r,i<0||e<=i){i-=r,r=-r;break}}}function vn(n,t,e){const r=new rn;e.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),hn.getCharCountIndicator(l.mode,n)),l.write(r)});const i=ft.getSymbolTotalCodewords(n),o=Ct.getTotalCodewordsCount(n,t),a=(i-o)*8;for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const s=(a-r.getLengthInBits())/8;for(let l=0;l<s;l++)r.put(l%2?17:236,8);return pn(r,n,t)}function pn(n,t,e){const r=ft.getSymbolTotalCodewords(t),i=Ct.getTotalCodewordsCount(t,e),o=r-i,a=Ct.getBlocksCount(t,e),s=r%a,l=a-s,h=Math.floor(r/a),u=Math.floor(o/a),w=u+1,c=h-u,d=new ln(c);let m=0;const p=new Array(a),_=new Array(a);let f=0;const y=new Uint8Array(n.buffer);for(let B=0;B<a;B++){const D=B<l?u:w;p[B]=y.slice(m,m+D),_[B]=d.encode(p[B]),m+=D,f=Math.max(f,D)}const v=new Uint8Array(r);let g=0,C,T;for(C=0;C<f;C++)for(T=0;T<a;T++)C<p[T].length&&(v[g++]=p[T][C]);for(C=0;C<c;C++)for(T=0;T<a;T++)v[g++]=_[T][C];return v}function wn(n,t,e,r){let i;if(Array.isArray(n))i=pt.fromArray(n);else if(typeof n=="string"){let h=t;if(!h){const u=pt.rawSplit(n);h=at.getBestVersionForData(u,e)}i=pt.fromString(n,h||40)}else throw new Error("Invalid data");const o=at.getBestVersionForData(i,e);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=o;else if(t<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const a=vn(t,e,i),s=ft.getSymbolSize(t),l=new on(s);return cn(l,t),dn(l),fn(l,t),wt(l,e,0),t>=7&&gn(l,t),mn(l,a),isNaN(r)&&(r=_t.getBestMask(l,wt.bind(null,l,e))),_t.applyMask(r,l),wt(l,e,r),{modules:l,version:t,errorCorrectionLevel:e,maskPattern:r,segments:i}}Jt.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let r=vt.M,i,o;return typeof e<"u"&&(r=vt.from(e.errorCorrectionLevel,vt.M),i=at.from(e.version),o=_t.from(e.maskPattern),e.toSJISFunc&&ft.setToSJISFunction(e.toSJISFunc)),wn(t,i,r,o)};var se={},Mt={};(function(n){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let r=e.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+e);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,a=r.scale||4;return{width:o,scale:o?4:a,margin:i,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const o=n.getScale(r,i);return Math.floor((r+i.margin*2)*o)},n.qrToImageData=function(r,i,o){const a=i.modules.size,s=i.modules.data,l=n.getScale(a,o),h=Math.floor((a+o.margin*2)*l),u=o.margin*l,w=[o.color.light,o.color.dark];for(let c=0;c<h;c++)for(let d=0;d<h;d++){let m=(c*h+d)*4,p=o.color.light;if(c>=u&&d>=u&&c<h-u&&d<h-u){const _=Math.floor((c-u)/l),f=Math.floor((d-u)/l);p=w[s[_*a+f]?1:0]}r[m++]=p.r,r[m++]=p.g,r[m++]=p.b,r[m]=p.a}}})(Mt);(function(n){const t=Mt;function e(i,o,a){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=a,o.width=a,o.style.height=a+"px",o.style.width=a+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(o,a,s){let l=s,h=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(h=r()),l=t.getOptions(l);const u=t.getImageWidth(o.modules.size,l),w=h.getContext("2d"),c=w.createImageData(u,u);return t.qrToImageData(c.data,o,l),e(w,h,u),w.putImageData(c,0,0),h},n.renderToDataURL=function(o,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const h=n.render(o,a,l),u=l.type||"image/png",w=l.rendererOpts||{};return h.toDataURL(u,w.quality)}})(se);var le={};const yn=Mt;function Nt(n,t){const e=n.a/255,r=t+'="'+n.hex+'"';return e<1?r+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':r}function yt(n,t,e){let r=n+t;return typeof e<"u"&&(r+=" "+e),r}function En(n,t,e){let r="",i=0,o=!1,a=0;for(let s=0;s<n.length;s++){const l=Math.floor(s%t),h=Math.floor(s/t);!l&&!o&&(o=!0),n[s]?(a++,s>0&&l>0&&n[s-1]||(r+=o?yt("M",l+e,.5+h+e):yt("m",i,0),i=0,o=!1),l+1<t&&n[s+1]||(r+=yt("h",a),a=0)):i++}return r}le.render=function(t,e,r){const i=yn.getOptions(e),o=t.modules.size,a=t.modules.data,s=o+i.margin*2,l=i.color.light.a?"<path "+Nt(i.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",h="<path "+Nt(i.color.dark,"stroke")+' d="'+En(a,o,i.margin)+'"/>',u='viewBox="0 0 '+s+" "+s+'"',c='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+h+`</svg>
`;return typeof r=="function"&&r(null,c),c};const _n=Oe,Tt=Jt,ue=se,Cn=le;function Lt(n,t,e,r,i){const o=[].slice.call(arguments,1),a=o.length,s=typeof o[a-1]=="function";if(!s&&!_n())throw new Error("Callback required as last argument");if(s){if(a<2)throw new Error("Too few arguments provided");a===2?(i=e,e=t,t=r=void 0):a===3&&(t.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=e,e=t,t=void 0))}else{if(a<1)throw new Error("Too few arguments provided");return a===1?(e=t,t=r=void 0):a===2&&!t.getContext&&(r=e,e=t,t=void 0),new Promise(function(l,h){try{const u=Tt.create(e,r);l(n(u,t,r))}catch(u){h(u)}})}try{const l=Tt.create(e,r);i(null,n(l,t,r))}catch(l){i(l)}}ut.create=Tt.create;ut.toCanvas=Lt.bind(null,ue.render);ut.toDataURL=Lt.bind(null,ue.renderToDataURL);ut.toString=Lt.bind(null,function(n,t,e){return Cn.render(n,e)});export{Rn as _,ut as b,E as e};
